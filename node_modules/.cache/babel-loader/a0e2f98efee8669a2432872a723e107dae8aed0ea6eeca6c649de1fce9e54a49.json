{"ast":null,"code":"import _objectSpread from \"/home/nigro/Documents/personal_website/ngrlcu.github.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/nigro/Documents/personal_website/ngrlcu.github.io/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"geometry\", \"wireColor\"];\nimport { Mesh } from '../core/Mesh.js';\nimport { Program } from '../core/Program.js';\nimport { Geometry } from '../core/Geometry.js';\nimport { Color } from '../math/Color.js';\nexport class WireMesh extends Mesh {\n  constructor(gl) {\n    let _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      {\n        geometry,\n        wireColor = new Color(0, 0.75, 0.5)\n      } = _ref,\n      meshProps = _objectWithoutProperties(_ref, _excluded);\n    const wireProgram = new Program(gl, {\n      vertex,\n      fragment,\n      uniforms: {\n        wireColor: {\n          value: wireColor\n        }\n      }\n    });\n    const positionArray = geometry.attributes.position.data;\n    const indices = [];\n    const hashSet = new Set();\n    function addUniqueIndices(idx) {\n      for (let i = 0; i < idx.length; i += 2) {\n        if (isUniqueEdgePosition(idx[i] * 3, idx[i + 1] * 3, positionArray, hashSet)) {\n          indices.push(idx[i], idx[i + 1]);\n        }\n      }\n    }\n    if (geometry.attributes.index) {\n      const idata = geometry.attributes.index.data;\n      for (let i = 0; i < idata.length; i += 3) {\n        // For every triangle, make three line pairs (start, end)\n        // prettier-ignore\n        addUniqueIndices([idata[i], idata[i + 1], idata[i + 1], idata[i + 2], idata[i + 2], idata[i]]);\n      }\n    } else {\n      const numVertices = Math.floor(positionArray.length / 3);\n      for (let i = 0; i < numVertices; i += 3) {\n        addUniqueIndices([i, i + 1, i + 1, i + 2, i + 2, i]);\n      }\n    }\n    const indicesTyped = indices.length > 65536 ? new Uint32Array(indices) : new Uint16Array(indices);\n    const wireGeometry = new Geometry(gl, {\n      position: _objectSpread({}, geometry.attributes.position),\n      index: {\n        data: indicesTyped\n      }\n    });\n    super(gl, _objectSpread(_objectSpread({}, meshProps), {}, {\n      mode: gl.LINES,\n      geometry: wireGeometry,\n      program: wireProgram\n    }));\n  }\n}\n\n// from https://github.com/mrdoob/three.js/blob/0c26bb4bb8220126447c8373154ac045588441de/src/geometries/WireframeGeometry.js#L116\nfunction isUniqueEdgePosition(start, end, pos, hashSet) {\n  // prettier-ignore\n  const hash1 = [pos[start], pos[start + 1], pos[start + 2], pos[end], pos[end + 1], pos[end + 2]].join('#');\n\n  // coincident edge\n  // prettier-ignore\n  const hash2 = [pos[end], pos[end + 1], pos[end + 2], pos[start], pos[start + 1], pos[start + 2]].join('#');\n  const oldSize = hashSet.size;\n  hashSet.add(hash1);\n  hashSet.add(hash2);\n  return hashSet.size - oldSize === 2;\n}\nconst vertex = /* glsl */\"\\nattribute vec3 position;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nvoid main() {    \\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n}\\n\";\nconst fragment = /* glsl */\"\\nprecision highp float;\\nuniform vec3 wireColor;\\n\\nvoid main() {    \\n    gl_FragColor = vec4(wireColor, 1.0);\\n}\\n\";","map":{"version":3,"names":["Mesh","Program","Geometry","Color","WireMesh","constructor","gl","_ref","arguments","length","undefined","geometry","wireColor","meshProps","_objectWithoutProperties","_excluded","wireProgram","vertex","fragment","uniforms","value","positionArray","attributes","position","data","indices","hashSet","Set","addUniqueIndices","idx","i","isUniqueEdgePosition","push","index","idata","numVertices","Math","floor","indicesTyped","Uint32Array","Uint16Array","wireGeometry","_objectSpread","mode","LINES","program","start","end","pos","hash1","join","hash2","oldSize","size","add"],"sources":["/home/nigro/Documents/personal_website/ngrlcu.github.io/node_modules/ogl/src/extras/WireMesh.js"],"sourcesContent":["import { Mesh } from '../core/Mesh.js';\nimport { Program } from '../core/Program.js';\nimport { Geometry } from '../core/Geometry.js';\nimport { Color } from '../math/Color.js';\n\nexport class WireMesh extends Mesh {\n    constructor(gl, { geometry, wireColor = new Color(0, 0.75, 0.5), ...meshProps } = {}) {\n        const wireProgram = new Program(gl, {\n            vertex,\n            fragment,\n            uniforms: { wireColor: { value: wireColor } },\n        });\n\n        const positionArray = geometry.attributes.position.data;\n        const indices = [];\n        const hashSet = new Set();\n\n        function addUniqueIndices(idx) {\n            for (let i = 0; i < idx.length; i += 2) {\n                if (isUniqueEdgePosition(idx[i] * 3, idx[i + 1] * 3, positionArray, hashSet)) {\n                    indices.push(idx[i], idx[i + 1]);\n                }\n            }\n        }\n\n        if (geometry.attributes.index) {\n            const idata = geometry.attributes.index.data;\n\n            for (let i = 0; i < idata.length; i += 3) {\n                // For every triangle, make three line pairs (start, end)\n                // prettier-ignore\n                addUniqueIndices([\n                    idata[i], idata[i + 1],\n                    idata[i + 1], idata[i + 2],\n                    idata[i + 2], idata[i]\n                ]);\n            }\n        } else {\n            const numVertices = Math.floor(positionArray.length / 3);\n\n            for (let i = 0; i < numVertices; i += 3) {\n                addUniqueIndices([i, i + 1, i + 1, i + 2, i + 2, i]);\n            }\n        }\n\n        const indicesTyped = indices.length > 65536 ? new Uint32Array(indices) : new Uint16Array(indices);\n        const wireGeometry = new Geometry(gl, {\n            position: { ...geometry.attributes.position },\n            index: { data: indicesTyped },\n        });\n\n        super(gl, { ...meshProps, mode: gl.LINES, geometry: wireGeometry, program: wireProgram });\n    }\n}\n\n// from https://github.com/mrdoob/three.js/blob/0c26bb4bb8220126447c8373154ac045588441de/src/geometries/WireframeGeometry.js#L116\nfunction isUniqueEdgePosition(start, end, pos, hashSet) {\n    // prettier-ignore\n    const hash1 = [\n        pos[start], pos[start + 1], pos[start + 2],\n        pos[end], pos[end + 1], pos[end + 2]\n    ].join('#');\n\n    // coincident edge\n    // prettier-ignore\n    const hash2 = [\n        pos[end], pos[end + 1], pos[end + 2],\n        pos[start], pos[start + 1], pos[start + 2]\n    ].join('#');\n\n    const oldSize = hashSet.size;\n    hashSet.add(hash1);\n    hashSet.add(hash2);\n    return hashSet.size - oldSize === 2;\n}\n\nconst vertex = /* glsl */ `\nattribute vec3 position;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main() {    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n`;\n\nconst fragment = /* glsl */ `\nprecision highp float;\nuniform vec3 wireColor;\n\nvoid main() {    \n    gl_FragColor = vec4(wireColor, 1.0);\n}\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}