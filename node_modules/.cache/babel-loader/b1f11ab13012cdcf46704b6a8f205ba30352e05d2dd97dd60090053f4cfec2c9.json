{"ast":null,"code":"import BaseSegment from './BaseSegment.js';\nimport { Vec3 } from '../../math/Vec3.js';\nimport { T_VALUES, C_VALUES } from './utils.js';\nconst tempVec3 = /* @__PURE__ */new Vec3();\nfunction quadraticBezier(t, p0, p1, p2) {\n  const k = 1 - t;\n  return k * k * p0 + 2 * k * t * p1 + t * t * p2;\n}\nfunction quadraticBezierDeriv(t, p0, p1, p2) {\n  const k = 1 - t;\n  return 2 * k * (p1 - p0) + 2 * t * (p2 - p1);\n}\nexport default class QuadraticBezierSegment extends BaseSegment {\n  constructor(p0, p1, p2) {\n    let tiltStart = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let tiltEnd = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    super();\n    this.p0 = p0;\n    this.p1 = p1;\n    this.p2 = p2;\n    this.tiltStart = tiltStart;\n    this.tiltEnd = tiltEnd;\n    this._len = -1;\n  }\n\n  /**\n   * Updates the segment length. You must call this method every time you change the curve's control points.\n   */\n  updateLength() {\n    // from https://github.com/Pomax/bezierjs/blob/d19695f3cc3ce383cf38ce4643f467deca7edb92/src/utils.js#L265\n    const z = 0.5;\n    const len = T_VALUES.length;\n    let sum = 0;\n    for (let i = 0, t; i < len; i++) {\n      t = z * T_VALUES[i] + z;\n      sum += C_VALUES[i] * this.getDerivativeAt(t, tempVec3).len();\n    }\n    this._len = z * sum;\n  }\n\n  /**\n   * Get point at relative position in curve according to segment length.\n   * @param {number} t Distance at time t in range [0 .. 1]\n   * @param {Vec3} out Optional Vec3 to output\n   * @returns {Vec3} Point at relative position\n   */\n  getPointAt(t) {\n    let out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vec3();\n    out.x = quadraticBezier(t, this.p0.x, this.p1.x, this.p2.x);\n    out.y = quadraticBezier(t, this.p0.y, this.p1.y, this.p2.y);\n    out.z = quadraticBezier(t, this.p0.z, this.p1.z, this.p2.z);\n    return out;\n  }\n  getDerivativeAt(t) {\n    let out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vec3();\n    out.x = quadraticBezierDeriv(t, this.p0.x, this.p1.x, this.p2.x);\n    out.y = quadraticBezierDeriv(t, this.p0.y, this.p1.y, this.p2.y);\n    out.z = quadraticBezierDeriv(t, this.p0.z, this.p1.z, this.p2.z);\n    return out;\n  }\n\n  /**\n   * Returns a unit vector tangent at t\n   * @param {number} t Distance at time t in range [0 .. 1]\n   * @param {Vec3} out Optional Vec3 to output\n   * @returns {Vec3} A unit vector\n   */\n  getTangentAt(t) {\n    let out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vec3();\n    return this.getDerivativeAt(t, out).normalize();\n  }\n  lastPoint() {\n    return this.p2;\n  }\n}","map":{"version":3,"names":["BaseSegment","Vec3","T_VALUES","C_VALUES","tempVec3","quadraticBezier","t","p0","p1","p2","k","quadraticBezierDeriv","QuadraticBezierSegment","constructor","tiltStart","arguments","length","undefined","tiltEnd","_len","updateLength","z","len","sum","i","getDerivativeAt","getPointAt","out","x","y","getTangentAt","normalize","lastPoint"],"sources":["/home/nigro/Documents/personal_website/ngrlcu.github.io/node_modules/ogl/src/extras/path/QuadraticBezierSegment.js"],"sourcesContent":["import BaseSegment from './BaseSegment.js';\nimport { Vec3 } from '../../math/Vec3.js';\nimport { T_VALUES, C_VALUES } from './utils.js';\n\nconst tempVec3 = /* @__PURE__ */ new Vec3();\n\nfunction quadraticBezier(t, p0, p1, p2) {\n    const k = 1 - t;\n    return k * k * p0 + 2 * k * t * p1 + t * t * p2;\n}\n\nfunction quadraticBezierDeriv(t, p0, p1, p2) {\n    const k = 1 - t;\n    return 2 * k * (p1 - p0) + 2 * t * (p2 - p1);\n}\n\nexport default class QuadraticBezierSegment extends BaseSegment {\n    constructor(p0, p1, p2, tiltStart = 0, tiltEnd = 0) {\n        super();\n        this.p0 = p0;\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.tiltStart = tiltStart;\n        this.tiltEnd = tiltEnd;\n\n        this._len = -1;\n    }\n\n    /**\n     * Updates the segment length. You must call this method every time you change the curve's control points.\n     */\n    updateLength() {\n        // from https://github.com/Pomax/bezierjs/blob/d19695f3cc3ce383cf38ce4643f467deca7edb92/src/utils.js#L265\n        const z = 0.5;\n        const len = T_VALUES.length;\n\n        let sum = 0;\n        for (let i = 0, t; i < len; i++) {\n            t = z * T_VALUES[i] + z;\n            sum += C_VALUES[i] * this.getDerivativeAt(t, tempVec3).len();\n        }\n\n        this._len = z * sum;\n    }\n\n    /**\n     * Get point at relative position in curve according to segment length.\n     * @param {number} t Distance at time t in range [0 .. 1]\n     * @param {Vec3} out Optional Vec3 to output\n     * @returns {Vec3} Point at relative position\n     */\n    getPointAt(t, out = new Vec3()) {\n        out.x = quadraticBezier(t, this.p0.x, this.p1.x, this.p2.x);\n        out.y = quadraticBezier(t, this.p0.y, this.p1.y, this.p2.y);\n        out.z = quadraticBezier(t, this.p0.z, this.p1.z, this.p2.z);\n        return out;\n    }\n\n    getDerivativeAt(t, out = new Vec3()) {\n        out.x = quadraticBezierDeriv(t, this.p0.x, this.p1.x, this.p2.x);\n        out.y = quadraticBezierDeriv(t, this.p0.y, this.p1.y, this.p2.y);\n        out.z = quadraticBezierDeriv(t, this.p0.z, this.p1.z, this.p2.z);\n        return out;\n    }\n\n    /**\n     * Returns a unit vector tangent at t\n     * @param {number} t Distance at time t in range [0 .. 1]\n     * @param {Vec3} out Optional Vec3 to output\n     * @returns {Vec3} A unit vector\n     */\n    getTangentAt(t, out = new Vec3()) {\n        return this.getDerivativeAt(t, out).normalize();\n    }\n\n    lastPoint() {\n        return this.p2;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}