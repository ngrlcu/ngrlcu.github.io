{"ast":null,"code":"import { Vec3 } from '../math/Vec3.js';\nimport { Quat } from '../math/Quat.js';\nimport { Mat4 } from '../math/Mat4.js';\nimport { Euler } from '../math/Euler.js';\nexport class Transform {\n  constructor() {\n    this.parent = null;\n    this.children = [];\n    this.visible = true;\n    this.matrix = new Mat4();\n    this.worldMatrix = new Mat4();\n    this.matrixAutoUpdate = true;\n    this.worldMatrixNeedsUpdate = false;\n    this.position = new Vec3();\n    this.quaternion = new Quat();\n    this.scale = new Vec3(1);\n    this.rotation = new Euler();\n    this.up = new Vec3(0, 1, 0);\n    this.rotation._target.onChange = () => this.quaternion.fromEuler(this.rotation, true);\n    this.quaternion._target.onChange = () => this.rotation.fromQuaternion(this.quaternion, undefined, true);\n  }\n  setParent(parent) {\n    let notifyParent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (this.parent && parent !== this.parent) this.parent.removeChild(this, false);\n    this.parent = parent;\n    if (notifyParent && parent) parent.addChild(this, false);\n  }\n  addChild(child) {\n    let notifyChild = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (!~this.children.indexOf(child)) this.children.push(child);\n    if (notifyChild) child.setParent(this, false);\n  }\n  removeChild(child) {\n    let notifyChild = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (!!~this.children.indexOf(child)) this.children.splice(this.children.indexOf(child), 1);\n    if (notifyChild) child.setParent(null, false);\n  }\n  updateMatrixWorld(force) {\n    if (this.matrixAutoUpdate) this.updateMatrix();\n    if (this.worldMatrixNeedsUpdate || force) {\n      if (this.parent === null) this.worldMatrix.copy(this.matrix);else this.worldMatrix.multiply(this.parent.worldMatrix, this.matrix);\n      this.worldMatrixNeedsUpdate = false;\n      force = true;\n    }\n    for (let i = 0, l = this.children.length; i < l; i++) {\n      this.children[i].updateMatrixWorld(force);\n    }\n  }\n  updateMatrix() {\n    this.matrix.compose(this.quaternion, this.position, this.scale);\n    this.worldMatrixNeedsUpdate = true;\n  }\n  traverse(callback) {\n    // Return true in callback to stop traversing children\n    if (callback(this)) return;\n    for (let i = 0, l = this.children.length; i < l; i++) {\n      this.children[i].traverse(callback);\n    }\n  }\n  decompose() {\n    this.matrix.decompose(this.quaternion._target, this.position, this.scale);\n    this.rotation.fromQuaternion(this.quaternion);\n  }\n  lookAt(target) {\n    let invert = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (invert) this.matrix.lookAt(this.position, target, this.up);else this.matrix.lookAt(target, this.position, this.up);\n    this.matrix.getRotation(this.quaternion._target);\n    this.rotation.fromQuaternion(this.quaternion);\n  }\n}","map":{"version":3,"names":["Vec3","Quat","Mat4","Euler","Transform","constructor","parent","children","visible","matrix","worldMatrix","matrixAutoUpdate","worldMatrixNeedsUpdate","position","quaternion","scale","rotation","up","_target","onChange","fromEuler","fromQuaternion","undefined","setParent","notifyParent","arguments","length","removeChild","addChild","child","notifyChild","indexOf","push","splice","updateMatrixWorld","force","updateMatrix","copy","multiply","i","l","compose","traverse","callback","decompose","lookAt","target","invert","getRotation"],"sources":["/home/nigro/Documents/personal_website/ngrlcu.github.io/node_modules/ogl/src/core/Transform.js"],"sourcesContent":["import { Vec3 } from '../math/Vec3.js';\nimport { Quat } from '../math/Quat.js';\nimport { Mat4 } from '../math/Mat4.js';\nimport { Euler } from '../math/Euler.js';\n\nexport class Transform {\n    constructor() {\n        this.parent = null;\n        this.children = [];\n        this.visible = true;\n\n        this.matrix = new Mat4();\n        this.worldMatrix = new Mat4();\n        this.matrixAutoUpdate = true;\n        this.worldMatrixNeedsUpdate = false;\n\n        this.position = new Vec3();\n        this.quaternion = new Quat();\n        this.scale = new Vec3(1);\n        this.rotation = new Euler();\n        this.up = new Vec3(0, 1, 0);\n\n        this.rotation._target.onChange = () => this.quaternion.fromEuler(this.rotation, true);\n        this.quaternion._target.onChange = () => this.rotation.fromQuaternion(this.quaternion, undefined, true);\n    }\n\n    setParent(parent, notifyParent = true) {\n        if (this.parent && parent !== this.parent) this.parent.removeChild(this, false);\n        this.parent = parent;\n        if (notifyParent && parent) parent.addChild(this, false);\n    }\n\n    addChild(child, notifyChild = true) {\n        if (!~this.children.indexOf(child)) this.children.push(child);\n        if (notifyChild) child.setParent(this, false);\n    }\n\n    removeChild(child, notifyChild = true) {\n        if (!!~this.children.indexOf(child)) this.children.splice(this.children.indexOf(child), 1);\n        if (notifyChild) child.setParent(null, false);\n    }\n\n    updateMatrixWorld(force) {\n        if (this.matrixAutoUpdate) this.updateMatrix();\n        if (this.worldMatrixNeedsUpdate || force) {\n            if (this.parent === null) this.worldMatrix.copy(this.matrix);\n            else this.worldMatrix.multiply(this.parent.worldMatrix, this.matrix);\n            this.worldMatrixNeedsUpdate = false;\n            force = true;\n        }\n\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].updateMatrixWorld(force);\n        }\n    }\n\n    updateMatrix() {\n        this.matrix.compose(this.quaternion, this.position, this.scale);\n        this.worldMatrixNeedsUpdate = true;\n    }\n\n    traverse(callback) {\n        // Return true in callback to stop traversing children\n        if (callback(this)) return;\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].traverse(callback);\n        }\n    }\n\n    decompose() {\n        this.matrix.decompose(this.quaternion._target, this.position, this.scale);\n        this.rotation.fromQuaternion(this.quaternion);\n    }\n\n    lookAt(target, invert = false) {\n        if (invert) this.matrix.lookAt(this.position, target, this.up);\n        else this.matrix.lookAt(target, this.position, this.up);\n        this.matrix.getRotation(this.quaternion._target);\n        this.rotation.fromQuaternion(this.quaternion);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}