{"ast":null,"code":"import { Vec3 } from '../math/Vec3.js';\nimport { Quat } from '../math/Quat.js';\nconst prevPos = /* @__PURE__ */new Vec3();\nconst prevRot = /* @__PURE__ */new Quat();\nconst prevScl = /* @__PURE__ */new Vec3();\nconst nextPos = /* @__PURE__ */new Vec3();\nconst nextRot = /* @__PURE__ */new Quat();\nconst nextScl = /* @__PURE__ */new Vec3();\nexport class Animation {\n  constructor(_ref) {\n    let {\n      objects,\n      data\n    } = _ref;\n    this.objects = objects;\n    this.data = data;\n    this.elapsed = 0;\n    this.weight = 1;\n    this.duration = data.frames.length - 1;\n  }\n  update() {\n    let totalWeight = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    let isSet = arguments.length > 1 ? arguments[1] : undefined;\n    const weight = isSet ? 1 : this.weight / totalWeight;\n    const elapsed = this.elapsed % this.duration;\n    const floorFrame = Math.floor(elapsed);\n    const blend = elapsed - floorFrame;\n    const prevKey = this.data.frames[floorFrame];\n    const nextKey = this.data.frames[(floorFrame + 1) % this.duration];\n    this.objects.forEach((object, i) => {\n      prevPos.fromArray(prevKey.position, i * 3);\n      prevRot.fromArray(prevKey.quaternion, i * 4);\n      prevScl.fromArray(prevKey.scale, i * 3);\n      nextPos.fromArray(nextKey.position, i * 3);\n      nextRot.fromArray(nextKey.quaternion, i * 4);\n      nextScl.fromArray(nextKey.scale, i * 3);\n      prevPos.lerp(nextPos, blend);\n      prevRot.slerp(nextRot, blend);\n      prevScl.lerp(nextScl, blend);\n      object.position.lerp(prevPos, weight);\n      object.quaternion.slerp(prevRot, weight);\n      object.scale.lerp(prevScl, weight);\n    });\n  }\n}","map":{"version":3,"names":["Vec3","Quat","prevPos","prevRot","prevScl","nextPos","nextRot","nextScl","Animation","constructor","_ref","objects","data","elapsed","weight","duration","frames","length","update","totalWeight","arguments","undefined","isSet","floorFrame","Math","floor","blend","prevKey","nextKey","forEach","object","i","fromArray","position","quaternion","scale","lerp","slerp"],"sources":["/home/nigro/Documents/personal_website/ngrlcu.github.io/node_modules/ogl/src/extras/Animation.js"],"sourcesContent":["import { Vec3 } from '../math/Vec3.js';\nimport { Quat } from '../math/Quat.js';\n\nconst prevPos = /* @__PURE__ */ new Vec3();\nconst prevRot = /* @__PURE__ */ new Quat();\nconst prevScl = /* @__PURE__ */ new Vec3();\n\nconst nextPos = /* @__PURE__ */ new Vec3();\nconst nextRot = /* @__PURE__ */ new Quat();\nconst nextScl = /* @__PURE__ */ new Vec3();\n\nexport class Animation {\n    constructor({ objects, data }) {\n        this.objects = objects;\n        this.data = data;\n        this.elapsed = 0;\n        this.weight = 1;\n        this.duration = data.frames.length - 1;\n    }\n\n    update(totalWeight = 1, isSet) {\n        const weight = isSet ? 1 : this.weight / totalWeight;\n        const elapsed = this.elapsed % this.duration;\n\n        const floorFrame = Math.floor(elapsed);\n        const blend = elapsed - floorFrame;\n        const prevKey = this.data.frames[floorFrame];\n        const nextKey = this.data.frames[(floorFrame + 1) % this.duration];\n\n        this.objects.forEach((object, i) => {\n            prevPos.fromArray(prevKey.position, i * 3);\n            prevRot.fromArray(prevKey.quaternion, i * 4);\n            prevScl.fromArray(prevKey.scale, i * 3);\n\n            nextPos.fromArray(nextKey.position, i * 3);\n            nextRot.fromArray(nextKey.quaternion, i * 4);\n            nextScl.fromArray(nextKey.scale, i * 3);\n\n            prevPos.lerp(nextPos, blend);\n            prevRot.slerp(nextRot, blend);\n            prevScl.lerp(nextScl, blend);\n\n            object.position.lerp(prevPos, weight);\n            object.quaternion.slerp(prevRot, weight);\n            object.scale.lerp(prevScl, weight);\n        });\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}